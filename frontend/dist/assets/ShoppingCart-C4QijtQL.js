import{u as N,j as e,t as i}from"./index-DIbHvdxw.js";import{B as n}from"./button-CiVYHGSU.js";import{S as y,b as g,c as v,d as w}from"./sheet-C9NzLLpD.js";import{I as b}from"./ImageWithFallback-BqPSvVbE.js";import{c as h}from"./createLucideIcon-Bq6sAaVN.js";import{X as z}from"./index-xdtKWbBu.js";import{P as C}from"./plus-B4fOWdaF.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=[["path",{d:"M5 12h14",key:"1ays0h"}]],q=h("minus",k);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],m=h("shopping-bag",S);function x(t){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(t)}function _({isOpen:t,onClose:c,items:r,onUpdateQuantity:l,onRemoveItem:u}){const{user:d,addOrder:p}=N(),o=r.reduce((s,a)=>s+a.price*a.quantity,0),j=r.reduce((s,a)=>s+a.quantity,0),f=()=>{if(!d){i.error("Debes iniciar sesión para finalizar tu compra");return}if(r.length===0){i.error("Tu carrito está vacío");return}const s={items:r.map(a=>({id:a.id,name:a.name,brand:a.brand,price:a.price,size:a.size,quantity:a.quantity,image:a.image})),total:o,status:"confirmado",estimatedDelivery:new Date(Date.now()+7*24*60*60*1e3),shippingAddress:d.address||"Dirección por confirmar"};p(s),i.success("¡Pedido realizado exitosamente! Revisa el seguimiento en tu perfil."),c()};return e.jsx(y,{open:t,onOpenChange:c,children:e.jsxs(g,{side:"right",className:"w-full sm:w-96",children:[e.jsx(v,{children:e.jsxs(w,{className:"flex items-center space-x-2",children:[e.jsx(m,{className:"h-5 w-5"}),e.jsxs("span",{children:["Carrito (",j,")"]})]})}),e.jsx("div",{className:"flex flex-col h-full",children:r.length===0?e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"Tu carrito está vacío"}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Añade algunos productos para empezar"})]})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-1 overflow-y-auto py-4",children:e.jsx("div",{className:"space-y-4",children:r.map(s=>e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(b,{src:s.image,alt:s.name,className:"w-16 h-16 object-cover rounded"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 uppercase",children:s.brand}),e.jsx("h4",{className:"font-medium text-sm line-clamp-2",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Talla: ",s.size]})]}),e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>u(s.id,s.size),children:e.jsx(z,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l(s.id,s.size,s.quantity-1),disabled:s.quantity<=1,children:e.jsx(q,{className:"h-3 w-3"})}),e.jsx("span",{className:"text-sm font-medium w-8 text-center",children:s.quantity}),e.jsx(n,{variant:"outline",size:"sm",onClick:()=>l(s.id,s.size,s.quantity+1),children:e.jsx(C,{className:"h-3 w-3"})})]}),e.jsx("span",{className:"font-medium",children:x(s.price*s.quantity)})]})]})]},`${s.id}-${s.size}`))})}),e.jsxs("div",{className:"border-t pt-4 space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-lg font-semibold",children:"Total:"}),e.jsx("span",{className:"text-lg font-bold",children:x(o)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{className:"w-full",size:"lg",onClick:f,children:"Finalizar Compra"}),e.jsx(n,{variant:"outline",className:"w-full",onClick:c,children:"Seguir Comprando"})]})]})]})})]})})}export{_ as ShoppingCart};
